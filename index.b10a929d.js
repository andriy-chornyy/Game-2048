var e,r,t,n,o=document.querySelector(".start"),a=document.querySelector(".game-score"),c=document.querySelector(".message-container"),i=document.querySelector(".game-field").rows,s=0,l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function d(e){var r=!0,t=!1,n=void 0;try{for(var o,a=c.children[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var i=o.value;i.classList.contains("message-".concat(e))?i.classList.remove("hidden"):i.classList.add("hidden")}}catch(e){t=!0,n=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw n}}}function u(){for(var e=Math.floor(9*Math.random()+1),r=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());0!==l[r][t];)r=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());e=e<2?4:2,l[r][t]=e}function f(){a.innerText=s;for(var e=0;e<l.length;e++)for(var r=0;r<l.length;r++)0!==l[e][r]?(i[e].children[r].className="field-cell",i[e].children[r].innerText=l[e][r],l[e][r]>2048?i[e].children[r].classList.add("field-cell--2048"):i[e].children[r].classList.add("field-cell--".concat(l[e][r]))):(i[e].children[r].className="field-cell",i[e].children[r].innerText="")}function h(e){var r=!1;return e.map(function(e){return e.filter(function(t){for(var n=0;n<l.length;n++)if(e[n]===e[n+1]||0===e[n]){r=!0;return}})}),r}function v(e,r){var t=e.filter(function(e){return 0!==e});("ArrowRight"===r||"ArrowDown"===r)&&t.reverse();for(var n=0;n<t.length;n++)t[n]===t[n+1]&&(t[n]*=2,t[n+1]=0,s+=t[n]);for(t=t.filter(function(e){return 0!==e});t.length<l.length;)t.push(0);return"ArrowRight"===r||"ArrowDown"===r?t.reverse():t}function m(e){document.dispatchEvent(new KeyboardEvent("keyup",{code:e}))}o.addEventListener("click",function(e){o.classList.contains("start")&&(o.classList.remove("start"),o.classList.add("restart"),o.innerText="restart"),d("restart"),function(){s=0;for(var e=0;e<l.length;e++)for(var r=0;r<l.length;r++)l[e][r]=0}(),u(),u(),f()}),document.addEventListener("keyup",function(e){var r=document.querySelector(".message-lose");if(!o.classList.contains("start")&&r.classList.contains("hidden")){var t=JSON.parse(JSON.stringify(l));switch(e.code){case"ArrowLeft":case"ArrowRight":(function(e){for(var r=0;r<l.length;r++){var t=l[r];t=v(t,e),l[r]=t}})(e.code);break;case"ArrowUp":case"ArrowDown":(function(e){for(var r=0;r<l.length;r++){var t=[l[0][r],l[1][r],l[2][r],l[3][r]];t=v(t,e);for(var n=0;n<l.length;n++)l[n][r]=t[n]}})(e.code)}JSON.stringify(t)!==JSON.stringify(l)&&(u(),f(),!function(){for(var e=[],r=0;r<l.length;r++){var t=[l[0][r],l[1][r],l[2][r],l[3][r]];e.push(t)}var n=h(l),o=h(e);return!!n||!!o||(d("lose"),!1)}()&&d("lose"))}}),document.addEventListener("touchstart",function(t){e=t.touches[0].clientY,r=t.touches[0].clientX}),document.addEventListener("touchmove",function(e){t=e.touches[0].clientY,n=e.touches[0].clientX}),document.addEventListener("touchend",function(o){var a=Math.abs(e-t),c=Math.abs(r-n);e-t<0&&a>c&&m("ArrowDown"),e-t>0&&a>c&&m("ArrowUp"),r-n<0&&c>a&&m("ArrowRight"),r-n>0&&c>a&&m("ArrowLeft")});
//# sourceMappingURL=index.b10a929d.js.map
